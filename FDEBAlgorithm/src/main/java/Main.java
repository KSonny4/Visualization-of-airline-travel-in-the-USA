import com.tinkerpop.blueprints.*;
import com.tinkerpop.blueprints.impls.tg.TinkerGraph;
import com.tinkerpop.blueprints.util.io.graphml.GraphMLReader;
import model.Node;
import model.Edge;

import java.io.*;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;


public class Main {

    private static List<List<Edge>> adjacency;
    private static Edge[] flights;
    private static Node[] airports;
    private int numNodes;
    private int numEdges;

    /**
     * Defines nodes by their latitude/longitute coordinates rather by their x/y mappings.
     *
     * @param ID
     * @param data
     * @return
     */
    @SuppressWarnings("unused")
    private Node parseAirportData(final int ID, String data){
        String[] splitted = data.split("\\(");
        String name = splitted[0];

        String[] locSplit = splitted[1].split(",");
        String lngxPart = locSplit[0];
        String latyPart = locSplit[1].replace(")", "");

        double lngx = Double.valueOf(lngxPart.split("lngx=")[1]);
        double laty = Double.valueOf(latyPart.split("laty=")[1]);

        return new Node(lngx, laty, ID, name);
    }

    /**
     * Loads and parses input data. Stores data into {@code flights} and {@code airports} arrays.
     *
     * @throws IOException
     */
    private void loadInputData() throws IOException {

        Graph graph = new TinkerGraph();
        GraphMLReader reader = new GraphMLReader(graph);

        InputStream is = new BufferedInputStream(new FileInputStream("src/main/resources/airlines.graphml"));
        reader.inputGraph(is);

        numNodes = (int)graph.getVertices().spliterator().getExactSizeIfKnown();
        numEdges = (int)graph.getEdges().spliterator().getExactSizeIfKnown();

        flights = new Edge[numEdges];
        airports = new Node[numNodes];

//        for(Vertex v : graph.getVertices()){
//            int nodeID = Integer.valueOf((String) v.getId());
//            String name = v.getProperty("tooltip").toString().split("\\(")[0];
//            double x = Double.valueOf(v.getProperty("x").toString());
//            double y = Double.valueOf(v.getProperty("y").toString());
//            airports[nodeID] = new Node(x, y, nodeID, name);
//        }

        // uses scaled values of point coordinates instead of the original ones
        parseScaledGraph();

        adjacency = new ArrayList<>(numNodes);
        for (int i = 0; i < numNodes; i++) {
            adjacency.add(new ArrayList<>());
        }

        for(com.tinkerpop.blueprints.Edge e : graph.getEdges()){
            int nodeFromID = Integer.valueOf((String)e.getVertex(Direction.OUT).getId());
            int nodeToID = Integer.valueOf((String)e.getVertex(Direction.IN).getId());
            int flightID = Integer.valueOf((String) e.getId());
            Edge edge = new Edge(airports[nodeFromID], airports[nodeToID], flightID);
            adjacency.get(nodeFromID).add(edge);
            flights[flightID] = edge;
        }

    }


    @SuppressWarnings("unused")
    private void printAirports(){
        Arrays.stream(airports).forEach(System.out::println);
    }

    @SuppressWarnings("unused")
    private void printAdjacency(){
        for (int i = 0; i < numNodes; i++) {
            System.out.println("Edges from node " + i + ":");
            for(Edge edge : adjacency.get(i)){
                System.out.println(edge);
            }
        }
    }

    @SuppressWarnings("unused")
    private void printFlights(){
        Arrays.stream(flights).forEach(System.out::println);
    }

    @SuppressWarnings("unused")
    private void printEdgeSubdivisions(List<List<Node>> edgeSubdivisions){
        for (int i = 0; i < edgeSubdivisions.size(); i++) {
            System.out.println(flights[i]);
            for(Node point : edgeSubdivisions.get(i)){
                System.out.println("\t " + point.getPosition());
            }
        }
    }

    private void printResultsToFileJson(List<List<Node>>edges) throws FileNotFoundException, UnsupportedEncodingException {
        PrintWriter writer = new PrintWriter("src/main/resources/results.js", "UTF-8");
        writer.println("var results = [");
        int i = 0;
        for(List<Node> edge : edges){
            writer.print("[");
            int idx = 0;
            for(Node point : edge){
                writer.print("{\"x\":" + point.getPosition().getX() + ", \"y\":" + point.getPosition().getY() + "}");
                if(++idx < edge.size())
                    writer.println(",");
            }
            writer.print("]");
            if(++i < edges.size())
                writer.print(",");
        }

        writer.println("]");
        writer.close();
    }

    private void parseScaledGraph() throws FileNotFoundException {
        String input = "{\"0\": {\"x\": 598.84446872426,\"y\": 345.91684783505156},\"1\": {\"x\": 783.6269875744255,\"y\": 215.80550061855666},\"2\": {\"x\": 914.5971188490505,\"y\": 177.58763587628854},\"3\": {\"x\": 834.9067996687119,\"y\": 274.3299039175258},\"4\": {\"x\": 352.32335750044103,\"y\": 339.3797204123711},\"5\": {\"x\": 593.2889909398016,\"y\": 417.46288659793817},\"6\": {\"x\": 747.5045141160824,\"y\": 128.1649554639174},\"7\": {\"x\": 52.5706554574303,\"y\": 214.3917595876288},\"8\": {\"x\": 764.7850256451293,\"y\": 331.0549851546393},\"9\": {\"x\": 505.5201470566454,\"y\": 441.29210556701037},\"10\": {\"x\": 668.9567141849473,\"y\": 140.78351216494838},\"11\": {\"x\": 865.440479647868,\"y\": 252.41683381443303},\"12\": {\"x\": 1000,\"y\": 134.12371134020617},\"13\": {\"x\": 657.9933313769894,\"y\": 296.89724618556716},\"14\": {\"x\": 710.9440866563083,\"y\": 440.82473525773196},\"15\": {\"x\": 79.41972928093651,\"y\": 50},\"16\": {\"x\": 552.4203334481076,\"y\": 76.98968371134029},\"17\": {\"x\": 251.41085508966256,\"y\": 109.83883628865982},\"18\": {\"x\": 319.34757197442923,\"y\": 113.09278350515464},\"19\": {\"x\": 692.6638643575698,\"y\": 370.3711270103092},\"20\": {\"x\": 744.186466290959,\"y\": 172.70377072164956},\"21\": {\"x\": 452.7360216640771,\"y\": 92.41237814432992},\"22\": {\"x\": 729.4099616921825,\"y\": 276.368726185567},\"23\": {\"x\": 151.11244799225767,\"y\": 357.05154639175265},\"24\": {\"x\": 187.56814694869567,\"y\": 160.10860041237106},\"25\": {\"x\": 933.7342263002657,\"y\": 194.29553030927823},\"26\": {\"x\": 566.0923987738569,\"y\": 100.43916824742263},\"27\": {\"x\": 830.0701628386661,\"y\": 173.2295439175257},\"28\": {\"x\": 925.6795058669845,\"y\": 141.02303340206183},\"29\": {\"x\": 774.639204898612,\"y\": 374.57731257731956},\"30\": {\"x\": 729.7955600107971,\"y\": 176.5360894845361},\"31\": {\"x\": 607.6465815252352,\"y\": 195.43471257731963},\"32\": {\"x\": 655.5464615486857,\"y\": 225.03574350515476},\"33\": {\"x\": 642.3980216019124,\"y\": 134.76633237113407},\"34\": {\"x\": 807.6483232570556,\"y\": 384.42096453608235},\"35\": {\"x\": 792.3481761416004,\"y\": 335.6700960824742},\"36\": {\"x\": 712.67689694935,\"y\": 135.35635505154644},\"37\": {\"x\": 672.8745816168044,\"y\": 193.46013979381442},\"38\": {\"x\": 731.7949472747739,\"y\": 103.62886597938143},\"39\": {\"x\": 611.5311161246608,\"y\": 132.7391822680412},\"40\": {\"x\": 588.4095098521318,\"y\": 79.79382144329898},\"41\": {\"x\": 728.3483666767792,\"y\": 255.07491175257726},\"42\": {\"x\": 298.2110601215336,\"y\": 55.25773195876287},\"43\": {\"x\": 384.7564605216863,\"y\": 259.95875587628865},\"44\": {\"x\": 516.350215672581,\"y\": 384.45602309278354},\"45\": {\"x\": 648.3200577168974,\"y\": 169.04089814432987},\"46\": {\"x\": 698.662060424907,\"y\": 397.0103092783505},\"47\": {\"x\": 385.32772871513976,\"y\": 85.0515534020619},\"48\": {\"x\": 385.5038528893798,\"y\": 237.98143628865978},\"49\": {\"x\": 574.1899634647623,\"y\": 202.81305608247425},\"50\": {\"x\": 750.8749347617252,\"y\": 188.54123711340208},\"51\": {\"x\": 484.4407723057172,\"y\": 64.37112701030922},\"52\": {\"x\": 714.9428783219655,\"y\": 417.69071463917527},\"53\": {\"x\": 599.5490168343294,\"y\": 91.36083175257723},\"54\": {\"x\": 347.0535138127089,\"y\": 242.78351216494852},\"55\": {\"x\": 696.5150832622674,\"y\": 435.2165018556702},\"56\": {\"x\": 356.1936335309299,\"y\": 407.52577319587624},\"57\": {\"x\": 861.4702393954914,\"y\": 189.50514762886604},\"58\": {\"x\": 726.0823853041634,\"y\": 117.9999929896907},\"59\": {\"x\": 535.8538814543227,\"y\": 207.73195876288662},\"60\": {\"x\": 67.7089541052852,\"y\": 148.49483835051547},\"61\": {\"x\": 679.2536117213085,\"y\": 276.35705402061853},\"62\": {\"x\": 578.6981390781607,\"y\": 54.90720948453607},\"63\": {\"x\": 258.7943431076027,\"y\": 161.1133950515465},\"64\": {\"x\": 565.1260379742994,\"y\": 181.41993360824748},\"65\": {\"x\": 805.7250959454306,\"y\": 527.980412371134},\"66\": {\"x\": 127.69091477865842,\"y\": 303.0721579381444},\"67\": {\"x\": 769.4978939837517,\"y\": 452.0412441237114},\"68\": {\"x\": 274.45153712839146,\"y\": 113.56597938144323},\"69\": {\"x\": 672.9555058506043,\"y\": 173.03092783505159},\"70\": {\"x\": 545.4271908925266,\"y\": 445.7086004123711},\"71\": {\"x\": 221.0913963986252,\"y\": 60.164941443298936},\"72\": {\"x\": 513.8605015866535,\"y\": 67.8762886597938},\"73\": {\"x\": 877.2416904825118,\"y\": 188.6230263917527},\"74\": {\"x\": 642.3932744581674,\"y\": 221.05153938144338},\"75\": {\"x\": 848.2313637897254,\"y\": 169.4790354639175},\"76\": {\"x\": 620.0856919427883,\"y\": 372.2522383505156},\"77\": {\"x\": 770.3166991600523,\"y\": 342.42335835051546},\"78\": {\"x\": 652.9615132469123,\"y\": 436.96907216494844},\"79\": {\"x\": 863.8123978581623,\"y\": 231.00034597938145},\"80\": {\"x\": 732.45665112722,\"y\": 368.8989620618556},\"81\": {\"x\": 648.3295862797928,\"y\": 414.5244032989691},\"82\": {\"x\": 520.1443146130147,\"y\": 89.60824041237123},\"83\": {\"x\": 260.2224964535328,\"y\": 96.26804123711341},\"84\": {\"x\": 776.6386093002923,\"y\": 205.2783435051547},\"85\": {\"x\": 661.4161248431515,\"y\": 85.25601608247435},\"86\": {\"x\": 692.2354217813315,\"y\": 347.85636206185563},\"87\": {\"x\": 700.4662835265563,\"y\": 241.01924865979387},\"88\": {\"x\": 805.2014534287518,\"y\": 191.25773896907205},\"89\": {\"x\": 352.1948247275695,\"y\": 62.26803422680408},\"90\": {\"x\": 270.7907352422773,\"y\": 77.34020618556703},\"91\": {\"x\": 778.0667455085193,\"y\": 560},\"92\": {\"x\": 443.5959190835594,\"y\": 61.21648783505162},\"93\": {\"x\": 594.1220718227424,\"y\": 152.87629567010313},\"94\": {\"x\": 370.1894129295814,\"y\": 65.07217195876278},\"95\": {\"x\": 974.5790795224237,\"y\": 158.30927835051548},\"96\": {\"x\": 635.666726011225,\"y\": 396.7766346391754},\"97\": {\"x\": 780.351784006926,\"y\": 436.61854969072164},\"98\": {\"x\": 736.6506412306111,\"y\": 240.3298969072165},\"99\": {\"x\": 488.1539470123507,\"y\": 89.2577389690722},\"100\": {\"x\": 566.7017469434862,\"y\": 443.62887298969076},\"101\": {\"x\": 521.4248951979848,\"y\": 159.74055917525774},\"102\": {\"x\": 914.8827529457773,\"y\": 221.7525843298969},\"103\": {\"x\": 159.39566542029857,\"y\": 368.26803422680416},\"104\": {\"x\": 713.1957923222836,\"y\": 188.0680412371134},\"105\": {\"x\": 555.8954654593833,\"y\": 249.96906515463928},\"106\": {\"x\": 713.5147421137386,\"y\": 174.43299670103096},\"107\": {\"x\": 658.3884582584993,\"y\": 396.3092853608246},\"108\": {\"x\": 93.12989172056467,\"y\": 189.50514762886604},\"109\": {\"x\": 913.454599599847,\"y\": 218.94844659793822},\"110\": {\"x\": 602.9051446356293,\"y\": 441.06425649484544},\"111\": {\"x\": 630.6253793182523,\"y\": 261.390036701031},\"112\": {\"x\": 886.4865215663649,\"y\": 221.35533113402056},\"113\": {\"x\": 658.0457041975088,\"y\": 355.6202655670103},\"114\": {\"x\": 521.1297325383626,\"y\": 217.1783575257732},\"115\": {\"x\": 962.582687387749,\"y\": 185.37490474226803},\"116\": {\"x\": 154.53998860216464,\"y\": 365.1133950515463},\"117\": {\"x\": 926.5887467022773,\"y\": 218.34673072164944},\"118\": {\"x\": 150.13179434835715,\"y\": 362.46701030927835},\"119\": {\"x\": 632.5438423484296,\"y\": 445.52165649484533},\"120\": {\"x\": 710.0395929647601,\"y\": 273.465301443299},\"121\": {\"x\": 519.5730635572643,\"y\": 385.38487505154643},\"122\": {\"x\": 719.1606555571896,\"y\": 339.4848750515464},\"123\": {\"x\": 955.1182579983056,\"y\": 173.398969072165},\"124\": {\"x\": 579.8739740220924,\"y\": 168.66116371134018},\"125\": {\"x\": 755.5639988308117,\"y\": 160.77456577319583},\"126\": {\"x\": 495.77546058794616,\"y\": 525.8072235051546},\"127\": {\"x\": 205.6674636540435,\"y\": 317.44330597938136},\"128\": {\"x\": 741.2206839520184,\"y\": 320.2474226804124},\"129\": {\"x\": 797.4894870564613,\"y\": 485.340206185567},\"130\": {\"x\": 637.5375805023305,\"y\": 338.8247352577319},\"131\": {\"x\": 789.2062524907169,\"y\": 362.3092783505155},\"132\": {\"x\": 803.7733000828221,\"y\": 534.0618626804124},\"133\": {\"x\": 509.57607582426976,\"y\": 284.49484536082474},\"134\": {\"x\": 675.5261613080346,\"y\": 197.56701731958768},\"135\": {\"x\": 89.94037666831252,\"y\": 290.74569979381437},\"136\": {\"x\": 581.8352984475964,\"y\": 132.37114103092787},\"137\": {\"x\": 224.23332004950893,\"y\": 89.60824041237123},\"138\": {\"x\": 667.0810782746909,\"y\": 430.8467377319588},\"139\": {\"x\": 91.13048731888446,\"y\": 306.9278420618556},\"140\": {\"x\": 492.4383727747346,\"y\": 120.45360824742266},\"141\": {\"x\": 615.5442006346615,\"y\": 153.4020688659794},\"142\": {\"x\": 581.8400455913411,\"y\": 442.9278280412371},\"143\": {\"x\": 303.3523710363942,\"y\": 86.8041237113402},\"144\": {\"x\": 364.76248505569754,\"y\": 99.77320288659799},\"145\": {\"x\": 602.1196722917599,\"y\": 392.80412371134025},\"146\": {\"x\": 182.8171986338977,\"y\": 364.7628936082473},\"147\": {\"x\": 565.273610735259,\"y\": 117.64949154639169},\"148\": {\"x\": 125.57250616700264,\"y\": 373.32715010309283},\"149\": {\"x\": 720.655440292576,\"y\": 211.5876218556701},\"150\": {\"x\": 701.5183499790639,\"y\": 168.47421979381454},\"151\": {\"x\": 826.0523140472177,\"y\": 367.5670103092784},\"152\": {\"x\": 693.8968192657655,\"y\": 316.57870350515475},\"153\": {\"x\": 354.80357729887896,\"y\": 173.913049072165},\"154\": {\"x\": 908.2799729902583,\"y\": 220.50824742268043},\"155\": {\"x\": 868.3253206153055,\"y\": 295.3608317525773},\"156\": {\"x\": 173.67709605338015,\"y\": 100.82474927835057},\"157\": {\"x\": 873.4666315301661,\"y\": 300.26804123711344},\"158\": {\"x\": 50,\"y\": 163.21648783505165},\"159\": {\"x\": 563.1599492673477,\"y\": 313.27215793814435},\"160\": {\"x\": 84.84665715482042,\"y\": 283.09277649484534},\"161\": {\"x\": 646.3920661238247,\"y\": 116.59794515463922},\"162\": {\"x\": 163.94668529132116,\"y\": 360.0776655670104},\"163\": {\"x\": 785.9120089351293,\"y\": 478.4116931958763},\"164\": {\"x\": 662.3872499241565,\"y\": 145.34019917525785},\"165\": {\"x\": 806.705749589331,\"y\": 515.1398531958763},\"166\": {\"x\": 119.40769735061754,\"y\": 79.44329896907217},\"167\": {\"x\": 142.8292305642168,\"y\": 115.1958762886598},\"168\": {\"x\": 889.8997864696319,\"y\": 237.76530144329902},\"169\": {\"x\": 809.4192306639759,\"y\": 317.1395142268041},\"170\": {\"x\": 460.7336221330946,\"y\": 142.88660494845362},\"171\": {\"x\": 804.3540797014678,\"y\": 224.7377983505155},\"172\": {\"x\": 758.929655195007,\"y\": 235.07216494845363},\"173\": {\"x\": 78.32005428935706,\"y\": 117.53849030927829},\"174\": {\"x\": 172.24894270744994,\"y\": 93.11340206185568},\"175\": {\"x\": 628.1118438250862,\"y\": 204.5773195876289},\"176\": {\"x\": 829.1228248894937,\"y\": 321.76631835051546},\"177\": {\"x\": 83.41852094659367,\"y\": 224.55670103092783},\"178\": {\"x\": 790.3487717399204,\"y\": 462.55670804123713},\"179\": {\"x\": 562.1316870843755,\"y\": 333.21650185567},\"180\": {\"x\": 685.2375320820055,\"y\": 435.5670032989691},\"181\": {\"x\": 413.31930465014614,\"y\": 150.24742969072167},\"182\": {\"x\": 571.5574237616202,\"y\": 393.8556701030928},\"183\": {\"x\": 126.81022535664599,\"y\": 245.605147628866},\"184\": {\"x\": 393.8965802399074,\"y\": 72.78349814432987},\"185\": {\"x\": 854.3295240789508,\"y\": 287.64948453608247},\"186\": {\"x\": 808.6289940386588,\"y\": 291.505147628866},\"187\": {\"x\": 103.12687945355908,\"y\": 145.69072164948454},\"188\": {\"x\": 73.70715017262256,\"y\": 185.29896206185563},\"189\": {\"x\": 859.1090409447326,\"y\": 259.21684783505145},\"190\": {\"x\": 617.2579709396149,\"y\": 434.1649554639176},\"191\": {\"x\": 95.12927898454151,\"y\": 262.4123711340206},\"192\": {\"x\": 260.50811341255616,\"y\": 218.49279051546392},\"193\": {\"x\": 491.86710458128135,\"y\": 455.1958832989691},\"194\": {\"x\": 171.10644059594986,\"y\": 387.896914226804},\"195\": {\"x\": 82.13319321787847,\"y\": 285.149138556701},\"196\": {\"x\": 111.8337923140939,\"y\": 335.2436519587629},\"197\": {\"x\": 764.5660572132654,\"y\": 500.1553171134021},\"198\": {\"x\": 787.7781162824901,\"y\": 400.5154709278351},\"199\": {\"x\": 678.6680678212151,\"y\": 97.67011010309278},\"200\": {\"x\": 83.25667247899369,\"y\": 78.41511793814428},\"201\": {\"x\": 677.8111826687382,\"y\": 345.4845360824742},\"202\": {\"x\": 527.5706640262819,\"y\": 184.59793814432987},\"203\": {\"x\": 259.36561130105605,\"y\": 373.1752647422681},\"204\": {\"x\": 700.0901966331342,\"y\": 199.31958762886597},\"205\": {\"x\": 778.2619268085504,\"y\": 518.1017228865979},\"206\": {\"x\": 165.09871596571688,\"y\": 74.82234144329894},\"207\": {\"x\": 578.9837731748876,\"y\": 292.90721649484533},\"208\": {\"x\": 910.8839441424169,\"y\": 203.5257731958763},\"209\": {\"x\": 220.23451124614843,\"y\": 161.4639175257732},\"210\": {\"x\": 874.8947677383928,\"y\": 169.52576618556697},\"211\": {\"x\": 955.1563551121848,\"y\": 198.61856371134013},\"212\": {\"x\": 733.7895873950065,\"y\": 437.0450148453608},\"213\": {\"x\": 764.932598406089,\"y\": 487.9573789690722},\"214\": {\"x\": 743.0867912993795,\"y\": 201.6972602061855},\"215\": {\"x\": 868.8965716710555,\"y\": 182.84536783505146},\"216\": {\"x\": 137.93069235075552,\"y\": 103.3192486597938},\"217\": {\"x\": 767.0843398501763,\"y\": 309.20033896907205},\"218\": {\"x\": 278.0837876012254,\"y\": 400.8776655670104},\"219\": {\"x\": 536.0585741795463,\"y\": 315.0247492783506},\"220\": {\"x\": 666.3860587275169,\"y\": 234.37114103092784},\"221\": {\"x\": 844.618170442683,\"y\": 218.8316197938144},\"222\": {\"x\": 151.96933314473443,\"y\": 106.7835051546392},\"223\": {\"x\": 851.9445384963593,\"y\": 257.2714870103093},\"224\": {\"x\": 596.1214762244226,\"y\": 181.44329896907217},\"225\": {\"x\": 514.4317526424038,\"y\": 131.67009608247434},\"226\": {\"x\": 916.3108891540041,\"y\": 212.63916824742267},\"227\": {\"x\": 818.6259817716535,\"y\": 229.11340907216498},\"228\": {\"x\": 881.6356090296788,\"y\": 206.92578020618555},\"229\": {\"x\": 506.7055105634729,\"y\": 331.96047175257723},\"230\": {\"x\": 546.4982973331225,\"y\": 452.8357294845361},\"231\": {\"x\": 844.2896920883323,\"y\": 355.5676882474227},\"232\": {\"x\": 113.69513538000695,\"y\": 96.96906515463918},\"233\": {\"x\": 347.8628075638172,\"y\": 224.1477756701031},\"234\": {\"x\": 780.9230350626759,\"y\": 269.42267340206183}}";
        String[] arr = input.split("},");

        String before0 = arr[0].replaceFirst("\\{","");
        String[]yy = before0.split("\"y\":");
        String y0 = yy[1];
        String x0 = yy[0].split("\"x\":")[1].replace(",","");

        airports[0] = new Node(Double.valueOf(x0),Double.valueOf(y0), 0, "custom");
        for (int i = 1; i < arr.length-1; i++) {
            String[]yyy = arr[i].split("\"y\":");
            String y = yyy[1];
            String x = yyy[0].split("\"x\":")[1].replace(",","");

            airports[i] = new Node(Double.valueOf(x),Double.valueOf(y), i, "custom");
        }

        String[]yyy = arr[arr.length-1].split("\"y\":");
        String y = yyy[1].replaceAll("\\}","");
        String x = yyy[0].split("\"x\":")[1].replace(",","");
//        System.out.println(x);
//        System.out.println(y);
        airports[arr.length-1] = new Node(Double.valueOf(x),Double.valueOf(y), arr.length-1, "custom");

    }

    public static void main(String[] args) throws IOException {
        Main m  = new Main();
        m.loadInputData();

        ForceDirectedEdgeBundling fdeb = new ForceDirectedEdgeBundling(airports, flights, adjacency);
        List<List<Node>> edges = fdeb.run();
//        m.printEdgeSubdivisions(edges);

        m.printResultsToFileJson(edges);
    }

}
